V = ../../axi/src/axi_pkg.sv ../../axi/src/axi_intf.sv axi_xbar_wrapper.sv axi_xbar_rework.sv ../axi/bram_ctrl.sv ../axi/buf.sv ../axi/channel.sv ../axi/common.sv ../axi/crossbar.sv ../axi/demux.sv ../axi/dummy_master.sv ../axi/dummy_slave.sv ../axi/from_lite.sv ../axi/id_downsizer.sv ../axi/join.sv ../axi/lite_bram_ctrl.sv ../axi/lite_buf.sv ../axi/lite_channel.sv ../axi/lite_dummy_master.sv ../axi/lite_dummy_slave.sv ../axi/lite_join.sv ../axi/mux.sv ../axi/regslice.sv ../axi/to_lite.sv onehot.sv regslice.sv fifo.sv from_if.sv to_if.sv round_robin_arbiter.sv priority_arbiter.sv slave_adapter.sv ../ram/simple_wr.sv xlnx_ila_axi_0_stub_edited.v xlnx_proto_check_stub_edited.v xlnx_ila_stub_edited.v

simple_xbar.sv: Makefile $V
	../../../../sv-elaborator/target/debug/sv-elaborator $V -t axi_xbar_wrapper -b axi_xbar_wrapper -b xlnx_ila_axi_0 -b xlnx_proto_check -b xlnx_ila | sed -e 's=AXI_BUS_1=AXI_BUS=' -e '/package axi_/,/endpackage/d' -e '/interface AXI_/,/endinterface/d' > simple_xbar.tmp
	mv -f simple_xbar.tmp $@
